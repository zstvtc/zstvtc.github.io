<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>الكلية التقنية بالزلفي | وحدة الصحة والسلامة المهنية</title>
  <meta name="description" content="وحدة الصحة والسلامة المهنية داخل مرافق الكلية التقنية بالزلفي: الرؤية والرسالة، تعليمات السلامة، المخاطر العامة، والفيديوهات التوعوية.">
  <!-- Bootstrap Icons -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet" />

  <style>
    :root{
      --primary:#0ea5e9; --primary-dark:#0369a1;
      --bg:#f9fafb; --text:#111827; --muted:#6b7280; --border:#e5e7eb; --white:#ffffff;
      --red:#ef4444; --red-dark:#dc2626; --amber:#f59e0b; --violet:#7c3aed;
      --emerald:#10b981; --emerald-dark:#059669; --indigo:#4f46e5; --rose:#e11d48;
      --shadow:0 1px 3px rgba(0,0,0,.06),0 1px 2px rgba(0,0,0,.03);
      --shadow-lg:0 10px 15px rgba(0,0,0,.07),0 4px 6px rgba(0,0,0,.05);
      --radius:18px;
    }

    html{scroll-behavior:smooth}
    body{margin:0;background:var(--bg);color:var(--text);font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,Arial,"Apple Color Emoji","Segoe UI Emoji";line-height:1.6}
    .no-scroll{overflow:hidden}
    .container{max-width:1100px;margin-inline:auto;padding-inline:16px}

    /* Topbar */
    header.topbar{position:sticky;top:0;z-index:40;background:rgba(255,255,255,.9);backdrop-filter:blur(8px);box-shadow:0 1px 0 var(--border)}
    .nav{display:flex;align-items:center;justify-content:space-between;padding:12px 0}
    .brand{display:flex;align-items:center;gap:8px;text-decoration:none;color:inherit}
    .brand img{height:48px;width:auto;border-radius:8px;object-fit:contain}

    /* Buttons */
    .btn{display:inline-flex;align-items:center;justify-content:center;gap:8px;border-radius:12px;font-weight:700;transition:.2s;border:0;cursor:pointer;outline:none}
    .btn:focus-visible{box-shadow:0 0 0 3px rgba(14,165,233,.35)}
    .btn-sm{height:40px;padding-inline:12px;font-size:14px}
    .btn-danger{background:var(--red);color:#fff}
    .btn-danger:hover{background:var(--red-dark)}

    /* Sections */
    section{scroll-margin-top:80px}
    .section{padding:56px 0}
    .hero{position:relative}
    .py-hero{padding-block:56px}

    /* Generic cards */
    .grid{display:grid;gap:24px}
    .grid-2{grid-template-columns:1fr 1fr}
    .card{background:#fff;border:1px solid var(--border);border-radius:24px;padding:24px;box-shadow:var(--shadow)}

    /* Action cards */
    .actions{margin-top:20px}
    .action-grid{display:grid;gap:16px;grid-template-columns:repeat(auto-fit,minmax(240px,1fr))}
    .action-card{
      position:relative;display:flex;align-items:flex-start;gap:12px;padding:16px;border-radius:var(--radius);
      border:1px solid var(--border);background:#fff;box-shadow:var(--shadow);
      transition:transform .15s ease, box-shadow .15s ease, border-color .15s ease;
      color:inherit;text-decoration:none;
    }
    .action-card:hover{transform:translateY(-3px);box-shadow:var(--shadow-lg);border-color:#dbe1ea}
    .action-card:focus-visible{outline:2px solid rgba(14,165,233,.35);outline-offset:2px}

    /* Icon badge */
    .icon-badge{
      flex:0 0 auto;display:inline-grid;place-items:center;width:40px;height:40px;border-radius:999px;background:#fff;border:1px solid var(--border);
      box-shadow:0 1px 2px rgba(0,0,0,.05)
    }
    .icon-badge i{font-size:20px}

    .action-title{font-size:16px;margin:0 0 4px;font-weight:900}
    .action-desc{margin:0;color:#4b5563;font-size:14px;line-height:1.5}

    /* Remove underline inside cards */
    a.action-card, a.action-card *{text-decoration:none}
    a.action-card:visited{color:inherit}

    /* Soft color themes */
    .c-sky{background:linear-gradient(180deg,#f0f9ff,#fff)}
    .c-sky .icon-badge i{color:#0ea5e9}
    .c-amber{background:linear-gradient(180deg,#fffbeb,#fff)}
    .c-amber .icon-badge i{color:#f59e0b}
    .c-emerald{background:linear-gradient(180deg,#ecfdf5,#fff)}
    .c-emerald .icon-badge i{color:#10b981}
    .c-indigo{background:linear-gradient(180deg,#eef2ff,#fff)}
    .c-indigo .icon-badge i{color:#4f46e5}
    .c-violet{background:linear-gradient(180deg,#f5f3ff,#fff)}
    .c-violet .icon-badge i{color:#7c3aed}
    .c-rose{background:linear-gradient(180deg,#fff1f2,#fff)}
    .c-rose .icon-badge i{color:#e11d48}

    /* Featured report card */
    .action-featured{border:2px solid var(--red);background:linear-gradient(180deg,#ffe4e6,#fff)}
    .action-featured .icon-badge{border-color:#fecaca;background:#fff5f5}
    .action-featured .icon-badge i{color:var(--red)}
    .pill{position:absolute;top:10px;left:10px;font-size:11px;padding:4px 8px;border-radius:999px;color:#fff;background:var(--red-dark)}

    /* Typography */
    h1{margin:0 0 8px;font-size:28px;font-weight:900;line-height:1.2}
    h2{margin:0 0 8px;font-size:24px;font-weight:800}
    h3{margin:0 0 6px;font-size:18px;font-weight:800}
    p{margin:0}
    .lead{margin-top:12px;font-size:18px;color:#374151}
    .text-muted{color:var(--muted)}
    .mb-3{margin-bottom:12px}
    .mb-5{margin-bottom:20px}
    .mb-6{margin-bottom:24px}
    .mb-8{margin-bottom:32px}
    .mt-4{margin-top:16px}
    .mt-6{margin-top:24px}

    /* Lists */
    ol.decimal{list-style:decimal;padding-right:22px;color:#1f2937}
    ol.decimal li{margin:6px 0}

    /* Aspect Video */
    .aspect-video{position:relative;width:100%;padding-top:56.25%;overflow:hidden;border-radius:20px}
    .aspect-video > iframe,.aspect-video>video{position:absolute;inset:0;width:100%;height:100%;border:0;border-radius:20px}

    /* Footer */
    footer{border-top:1px solid var(--border);background:var(--bg)}
    .footer-wrap{padding:40px 0;color:#6b7280;font-size:14px;text-align:center;font-weight:800}

    /* FAB (يسار) */
    .fab{width:48px;height:48px}
    .fab-md{width:56px;height:56px}
    .fab-wrap{position:fixed;bottom:16px;left:16px;display:flex;flex-direction:column;gap:12px;z-index:50}
    .fab-btn{display:flex;align-items:center;justify-content:center;border-radius:999px;color:#fff;box-shadow:var(--shadow-lg);text-decoration:none}
    .fab-red{background:var(--red)} .fab-red:hover{background:var(--red-dark)}
    .fab-sky{background:#0ea5e9} .fab-sky:hover{background:#0284c7}

    /* Right FAB (scroll to top) */
.fab-right {
  position: fixed;
  bottom: 16px;
  right: 16px;
  display: flex;
  flex-direction: column;
  gap: 12px;
  z-index: 50;
}

/* جعل الزر شفاف */
.fab-gray {
  background: transparent; /* 🔸 شفافية كاملة */
  color: #111827;          /* 🔸 لون الأيقونة (السهم) */
  border: 1px solid #ddd;  /* 🔸 اختياري - إطار خفيف حول الزر */
}

.fab-gray:hover {
  background: rgba(0, 0, 0, 0.05); /* 🔸 شفافية خفيفة عند مرور الماوس */
}


    /* Modal */
    .modal{position:fixed;inset:0;z-index:50;display:none}
    .modal.show{display:block}
    .backdrop{position:absolute;inset:0;background:rgba(0,0,0,.5)}
    .modal-center{position:absolute;inset:0;display:flex;align-items:center;justify-content:center;padding:16px}
    .dialog{width:100%;max-width:960px;max-height:85vh;background:#fff;border-radius:24px;box-shadow:var(--shadow-lg);display:flex;flex-direction:column;overflow:hidden}
    .dialog-head{display:flex;align-items:center;justify-content:space-between;padding:12px 16px;border-bottom:1px solid var(--border)}
    .dialog-title{font-weight:800;font-size:18px}
    .dialog-body{flex-grow:1}
    .dialog-iframe{width:100%;height:100%;min-height:60vh;border:0}
    .icon-btn{padding:8px;border-radius:12px;border:0;background:transparent;cursor:pointer}
    .icon-btn:hover{background:#f3f4f6}

    /* Map image card */
    .map-card{background:#fff;border:1px solid var(--border);border-radius:24px;padding:8px}
    .map-card img{display:block;width:100%;height:auto;border-radius:16px}

    /* Responsive */
    @media (min-width:768px){
      h1{font-size:36px}
      h2{font-size:28px}
      .grid-2{display:grid}
    }
    @media (min-width:1024px){
      h1{font-size:44px}
      .py-hero{padding-block:80px}
    }
  </style>
</head>
<body>
  <!-- الهيدر -->
  <header class="topbar">
    <nav class="container nav">
      <a href="#home" class="brand">
        <img src="logo1.png" alt="شعار الكلية التقنية بالزلفي" />
      </a>
      <button id="reportOpen" class="btn btn-danger btn-sm">الإبلاغ الآن</button>
    </nav>
  </header>

  <!-- البطل -->
  <section id="home" class="hero">
    <div class="container py-hero">
      <div class="grid" style="grid-template-columns:1fr; gap:24px">
        <div>
          <h1>وحدة الصحة والسلامة المهنية</h1>
          <p class="lead">نهدف لبيئة تدريبية آمنة وصحية تعزز جودة التدريب، مع نشر الوعي وتطبيق معايير السلامة لحماية الأرواح والممتلكات.</p>

          <!-- بطاقات الإجراءات -->
          <div class="actions mt-6">
            <div class="action-grid">
              <!-- التعليمات -->
              <a class="action-card c-sky" href="#guidelines" aria-label="اطلع على التعليمات">
                <span class="icon-badge"><i class="bi bi-journal-check" aria-hidden="true"></i></span>
                <div>
                  <h4 class="action-title">اطلع على التعليمات</h4>
                  <p class="action-desc">إرشادات السلامة الأساسية لجميع المنسوبين والمتدربين.</p>
                </div>
              </a>

              <!-- الفيديوهات -->
              <a class="action-card c-amber" href="#videos" aria-label="شاهد الفيديوهات">
                <span class="icon-badge"><i class="bi bi-play-btn-fill" aria-hidden="true"></i></span>
                <div>
                  <h4 class="action-title">شاهد الفيديوهات</h4>
                  <p class="action-desc">فرضية الإخلاء وطريقة استخدام طفايات الحريق.</p>
                </div>
              </a>

              <!-- خريطة نقاط التجمع -->
              <button id="goToMapCard" class="action-card c-indigo" type="button" aria-label="اطلع على موقع نقاط التجمع">
                <span class="icon-badge"><i class="bi bi-geo-alt-fill" aria-hidden="true"></i></span>
                <div>
                  <h4 class="action-title">اطلع على موقع نقاط التجمع لكل مبنى</h4>
                  <p class="action-desc">تعرف على أقرب نقطة تجمع لمسارك أثناء الإخلاء.</p>
                </div>
              </button>

              <!-- قياس الرضا (داخل الصفحة) -->
              <button class="action-card c-emerald" type="button" data-open="survey" aria-label="قياس الرضا عن فاعلية الصحة والسلامة">
                <span class="icon-badge"><i class="bi bi-clipboard-check" aria-hidden="true"></i></span>
                <div>
                  <h4 class="action-title">قياس الرضا عن فاعلية الصحة والسلامة</h4>
                  <p class="action-desc">أخبرنا بتجربتك لتحسين خدمات السلامة.</p>
                </div>
              </button>

              <!-- طلب تعزيز صندوق الإسعافات الأولية (داخل المودال) -->
              <button class="action-card c-violet" type="button" data-open="firstaid" aria-label="طلب تعزيز صندوق الإسعافات الأولية">
                <span class="icon-badge"><i class="bi bi-bandaid-fill" aria-hidden="true"></i></span>
                <div>
                  <h4 class="action-title">طلب تعزيز صندوق الإسعافات الأولية</h4>
                  <p class="action-desc">اطلب إضافة مستلزمات أو إعادة تعبئة للصندوق.</p>
                </div>
              </button>

              <!-- الإفصاح عن الحالات المرضية (داخل المودال) -->
              <button class="action-card c-rose" type="button" data-open="medical" aria-label="الإفصاح عن الحالات المرضية لتقديم الرعاية الصحية">
                <span class="icon-badge"><i class="bi bi-heart-pulse-fill" aria-hidden="true"></i></span>
                <div>
                  <h4 class="action-title">الإفصاح عن الحالات المرضية لتقديم الرعاية الصحية</h4>
                  <p class="action-desc">سري ومخصص لإدارة السلامة (تُحفظ البيانات بسرّية).</p>
                </div>
              </button>

              <!-- الإبلاغ عن خطر / ملاحظة (مميز) -->
              <button class="action-card action-featured" type="button" data-open="report" aria-label="الإبلاغ عن خطر أو ملاحظة">
                <span class="icon-badge"><i class="bi bi-exclamation-octagon-fill" aria-hidden="true"></i></span>
                <div>
                  <h4 class="action-title">الإبلاغ عن خطر / ملاحظة</h4>
                  <p class="action-desc">أبلغ فوراً ليتم التعامل مع الحالة بشكل عاجل.</p>
                </div>
              </button>
            </div>
          </div>
        </div>

        <!-- نبذة سريعة -->
        <div>
          <div class="card">
            <h2 class="mb-3">نبذة سريعة</h2>
            <ul class="text-muted" style="margin:0;padding:0;list-style:none">
              <li>⚠️ الالتزام بمخارج الطوارئ ومسارات الإخلاء.</li>
              <li>🧯 التعرّف على مواقع طفايات الحريق وأنواعها.</li>
              <li>🧪 اتباع إرشادات المعامل ولبس أدوات الوقاية.</li>
              <li>📱 الإبلاغ عن أي خطر مباشرة من خلال النموذج.</li>
            </ul>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- الرؤية والرسالة -->
  <section id="vision" class="section">
    <div class="container">
      <div class="grid grid-2">
        <div class="card">
          <h3>الرؤية</h3>
          <p class="text-muted">بيئة تدريبية آمنة وصحية تعزز جودة التدريب.</p>
        </div>
        <div class="card">
          <h3>الرسالة</h3>
          <p class="text-muted">نلتزم بتطبيق معايير السلامة ونشر الوعي لحماية الأرواح والممتلكات.</p>
        </div>
      </div>
    </div>
  </section>

  <!-- تعليمات -->
  <section id="guidelines" class="section">
    <div class="container">
      <div class="mb-6">
        <h2>🔰 تعليمات الصحة والسلامة المهنية لمنسوبي الكلية والمتدربين</h2>
      </div>
      <ol class="card decimal">
        <li>الالتزام بجميع تعليمات وإرشادات السلامة داخل مرافق الكلية.</li>
        <li>ارتداء معدات الوقاية الشخصية أثناء التواجد في المعامل والورش التدريبية.</li>
        <li>الإبلاغ فوراً عن أي حالة طارئة أو ملاحظة خطر لإدارة السلامة.</li>
        <li>الحفاظ على نظافة مكان العمل وعدم ترك مخلفات أو سوائل على الأرضيات.</li>
        <li>يمنع تشغيل أي جهاز أو آلة دون تدريب مسبق أو إشراف المختص.</li>
        <li>التأكد من سلامة طفايات الحريق ومخارج الطوارئ وعدم إعاقة استخدامها.</li>
        <li>يمنع التدخين داخل مباني الكلية أو بالقرب من المواد القابلة للاشتعال.</li>
        <li>المشاركة في برامج ودورات التوعية بالسلامة والصحة المهنية.</li>
        <li>اغلاق الأجهزة والاضاءة وأجهزة التكييف بعد الانتهاء من التدريب.</li>
        <li>الالتزام بالهدوء أثناء الطوارئ واتباع تعليمات الإخلاء بدقة.</li>
      </ol>
    </div>
  </section>

  <!-- المخاطر -->
  <section id="hazards" class="section">
    <div class="container">
      <div class="mb-6">
        <h2>⚠️ المخاطر العامة التي يجب الإبلاغ عنها فوراً</h2>
      </div>
      <ol class="card decimal">
        <li>تسربات الكهرباء مثل الأسلاك المكشوفة أو المقابس التالفة أو الشرر الكهربائي.</li>
        <li>تسربات المياه أو السوائل على الأرضيات أو بالقرب من الأجهزة الكهربائية.</li>
        <li>تسرب الغازات أو الروائح غير المعتادة داخل المعامل أو الورش.</li>
        <li>تعطل أنظمة السلامة مثل طفايات الحريق أو إنذارات الطوارئ أو مخارج الإخلاء.</li>
        <li>انسكاب مواد كيميائية أو تخزينها بطريقة غير آمنة.</li>
        <li>أرضيات أو سلالم غير آمنة مثل الانزلاقات، الكسر، أو ضعف الإضاءة.</li>
        <li>سلوكيات خطرة من الأفراد، مثل العبث بالأجهزة أو تجاهل تعليمات السلامة.</li>
        <li>حوادث أو إصابات مهما كانت بسيطة.</li>
        <li>الازدحام أو العوائق أمام الممرات ومخارج الطوارئ.</li>
        <li>الحرائق أو الدخان أو أي مؤشر يدل على خطر حريق.</li>
      </ol>
    </div>
  </section>

  <!-- الفيديوهات -->
  <!-- الفيديوهات -->
  <section id="videos" class="section" style="background:#fff;border-top:1px solid var(--border)">
    <div class="container">
      <div class="mb-8">
        <h2>الفيديوهات التوعوية</h2>
        <p class="text-muted mt-2">شاهد فرضية الإخلاء وطريقة استخدام طفايات الحريق.</p>
      </div>

      <div class="grid grid-lg-2" style="gap:24px">
        <!-- فيديو الإخلاء (ملف محلي evacuation.mp4) -->
        <article>
          <h3 class="mb-3" style="margin-bottom:12px">مقطع فيديو فرضية الإخلاء</h3>
          <div class="aspect-video border">
            <video id="evacVideo" controls preload="metadata">
              <source src="evacuation.mp4" type="video/mp4" />
              متصفحك لا يدعم تشغيل الفيديو.
            </video>
          </div>
        </article>

        <!-- فيديو الطفايات (ملف محلي fire-ext.mp4) -->
        <article>
          <h3 class="mb-3" style="margin-bottom:12px">مقطع شرح طفايات الحريق</h3>
          <div class="aspect-video border">
            <video id="extVideo" controls preload="metadata">
              <source src="fire-ext.mp4" type="video/mp4" />
              متصفحك لا يدعم تشغيل الفيديو.
            </video>
          </div>
        </article>
      </div>
    </div>
  </section>

  <!-- خريطة/مكان التجمع -->
  <section id="map" class="section">
    <div class="container">
      <div class="mb-5">
        <h2>خريطة نقاط التجمع لكل مبنى</h2>
        <p class="text-muted mt-2">يجب على جميع شاغلي المبنى التوجه إلى نقطة التجمع الخاصة بالمبنى فور صدور إنذار الإخلاء، والبقاء في الموقع حتى يتم التأكد من سلامة الجميع وإعطاء الإشارة بالعودة.</p>
      </div>
      <div class="map-card">
        <img src="tgmo3.png" alt="صورة موقع نقطة التجمع في الكلية التقنية بالزلفي" />
      </div>
    </div>
  </section>

  <!-- تذييل -->
  <footer>
    <div class="container footer-wrap">وحدة الصحة والسلامة المهنية | الكلية التقنية بالزلفي</div>
  </footer>

  <!-- أزرار عائمة يسار -->
  <div class="fab-wrap">
    <button id="reportFab" class="fab fab-md fab-btn fab-red" aria-label="الإبلاغ عن خطر أو ملاحظة">
      <i class="bi bi-exclamation-triangle-fill" style="font-size:22px" aria-hidden="true"></i>
    </button>
    <a href="https://t.me/Rakkan445" target="_blank" rel="noopener" class="fab fab-md fab-btn fab-sky" aria-label="التواصل عبر تيليجرام مع مشرف الصحة والسلامة">
      <i class="bi bi-telegram" style="font-size:22px" aria-hidden="true"></i>
    </a>
  </div>

  <!-- زر سهم يمين للرجوع للأعلى -->
  <div class="fab-right">
    <button id="scrollTopBtn" class="fab fab-md fab-btn fab-gray" aria-label="العودة لبداية الصفحة">
      <i class="bi bi-arrow-up" style="font-size:22px" aria-hidden="true"></i>
    </button>
  </div>

  <!-- نافذة النماذج -->
  <div id="formsModal" class="modal" aria-hidden="true">
    <div id="modalBackdrop" class="backdrop"></div>
    <div class="modal-center">
      <div role="dialog" aria-modal="true" aria-labelledby="formsTitle" class="dialog">
        <div class="dialog-head">
          <h3 id="formsTitle" class="dialog-title">النموذج</h3>
          <button id="formsClose" class="icon-btn" aria-label="إغلاق النافذة">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"><path stroke-width="2" d="M6 18 18 6M6 6l12 12"/></svg>
          </button>
        </div>
        <div class="dialog-body">
          <iframe id="formsFrame" title="Microsoft Forms" class="dialog-iframe" src="" loading="lazy" referrerpolicy="no-referrer" allow="fullscreen; clipboard-read; clipboard-write; geolocation"></iframe>
        </div>
      </div>
    </div>
  </div>

  <!-- سكربتات -->
  <script>
    /*** عناصر التحكم العامة ***/
    // أزرار فتح نموذج "الإبلاغ الآن" (من الهيدر والزر العائم)
    const reportBtns = [
      document.getElementById('reportOpen'),
      document.getElementById('reportFab')
    ].filter(Boolean);

    // مراجع المودال وإطاره وعناصره
    const formsModal    = document.getElementById('formsModal');
    const formsFrame    = document.getElementById('formsFrame');
    const formsTitle    = document.getElementById('formsTitle');
    const formsClose    = document.getElementById('formsClose');
    const modalBackdrop = document.getElementById('modalBackdrop');

    /*** روابط النماذج ***/
    // REPORT_FORM_URL: رابط نموذج "الإبلاغ عن خطر/ملاحظة" (Microsoft Forms) ويُفتح داخل المودال
    const REPORT_FORM_URL = 'https://forms.office.com/r/y96mzu8PC1?embed=true';

    // SURVEY_FORM_URL: رابط نموذج "قياس الرضا عن فاعلية الصحة والسلامة" ويُفتح داخل المودال
    const SURVEY_FORM_URL = 'https://forms.office.com/Pages/ResponsePage.aspx?id=t2SN3tp5mEGAwnuENDSDTyUK3_RQ8oVKhhYrxW-BQsFUNk9DV0QwNjRXUkNISFpHTUo3TFhVVDkzRy4u';

    // FIRSTAID_FORM_URL: رابط نموذج "طلب تعزيز صندوق الإسعافات الأولية" (حسب طلبك:) ويُفتح داخل المودال
    const FIRSTAID_FORM_URL = 'https://forms.office.com/Pages/ResponsePage.aspx?id=t2SN3tp5mEGAwnuENDSDTyUK3_RQ8oVKhhYrxW-BQsFUNFRCUFhYTE5LUDA1UTJSQVFOU1FFRDhHNC4u';

    // MEDICAL_FORM_URL: رابط نموذج "الإفصاح عن الحالات المرضية لتقديم الرعاية الصحية" (حاليًا:) ويُفتح داخل المودال
    const MEDICAL_FORM_URL  = 'https://forms.office.com/Pages/ResponsePage.aspx?id=t2SN3tp5mEGAwnuENDSDTyUK3_RQ8oVKhhYrxW-BQsFUODdHSzRDV1Y1TElGQlRFWUZLM05aQ1FWTi4u';

    // خريطة تربط نوع الزر (data-open) بعنوان النموذج والرابط الخاص به
    const FORM_MAP = {
      report:   { url: REPORT_FORM_URL,   title: 'نموذج الإبلاغ عن خطر/ملاحظة' },
      survey:   { url: SURVEY_FORM_URL,   title: 'قياس الرضا عن فاعلية الصحة والسلامة' },
      firstaid: { url: FIRSTAID_FORM_URL, title: 'طلب تعزيز صندوق الإسعافات الأولية' },
      medical:  { url: MEDICAL_FORM_URL,  title: 'الإفصاح عن الحالات المرضية لتقديم الرعاية الصحية' },
    };

    /*** دوال فتح/إغلاق المودال ***/
    function openFormsModal(type) {
      const cfg = FORM_MAP[type] || FORM_MAP.report;
      formsFrame.setAttribute('src', cfg.url);
      formsTitle.textContent = cfg.title;
      formsModal.classList.add('show');
      document.body.classList.add('no-scroll');
      formsModal.setAttribute('aria-hidden', 'false');
      formsClose?.focus();
    }

    function closeFormsModal() {
      formsModal.classList.remove('show');
      document.body.classList.remove('no-scroll');
      formsModal.setAttribute('aria-hidden', 'true');
      // نفرغ src لإيقاف التحميل/التشغيل
      formsFrame.setAttribute('src', '');
    }

    /*** الربط بالأزرار ***/
    // زرّي الإبلاغ المباشر (الهيدر + العائم)
    reportBtns.forEach(btn => btn?.addEventListener('click', () => openFormsModal('report')));

    // أي عنصر يحمل data-open (مثل survey / report / firstaid / medical) يفتح المودال بالرابط الموافق
    document.querySelectorAll('[data-open]').forEach(el => {
      el.addEventListener('click', (e) => {
        // لو كان العنصر <a> برابط، نمنع فتح التبويب ونستخدم المودال
        if (el.tagName.toLowerCase() === 'a') e.preventDefault();
        const type = el.getAttribute('data-open');
        openFormsModal(type);
      });
    });

    // إغلاق المودال
    formsClose?.addEventListener('click', closeFormsModal);
    modalBackdrop?.addEventListener('click', closeFormsModal);
    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape' && formsModal.classList.contains('show')) closeFormsModal();
    });

    /*** أزرار التنقّل داخل الصفحة ***/
    // تمرير لقسم الخريطة من بطاقة "نقاط التجمع"
    document.getElementById('goToMapCard')?.addEventListener('click', () => {
      document.getElementById('map')?.scrollIntoView({ behavior: 'smooth' });
    });

    // زر الرجوع للأعلى (السهم يمين)
    document.getElementById('scrollTopBtn')?.addEventListener('click', () => {
      window.scrollTo({ top: 0, behavior: 'smooth' });
    });
  </script>
</body>
</html>
